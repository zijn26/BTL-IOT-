<?xml version="1.0" encoding="UTF-8"?>
<ClassDiagram xmlns="http://www.omg.org/spec/UML/20131001" 
              xmlns:xmi="http://www.omg.org/spec/XMI/20131001"
              xmi:version="2.5.1">
  
  <Model name="STTSystem_Architecture" xmi:id="model_1">
    
    <!-- ============================================ -->
    <!-- MAIN CLASS: STTSystem -->
    <!-- ============================================ -->
    <Class name="STTSystem" xmi:id="STTSystem" visibility="public">
      <ownedAttribute name="chunk_duration_seconds_max" xmi:id="attr_1" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Real"/>
        <defaultValue xmi:type="LiteralReal" value="4.8"/>
      </ownedAttribute>
      
      <ownedAttribute name="chunk_duration_seconds_min" xmi:id="attr_2" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Real"/>
        <defaultValue xmi:type="LiteralReal" value="1.28"/>
      </ownedAttribute>
      
      <ownedAttribute name="sample_rate" xmi:id="attr_3" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        <defaultValue xmi:type="LiteralInteger" value="16000"/>
      </ownedAttribute>
      
      <ownedAttribute name="frame_duration_ms" xmi:id="attr_4" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        <defaultValue xmi:type="LiteralInteger" value="32"/>
      </ownedAttribute>
      
      <ownedAttribute name="language" xmi:id="attr_5" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        <defaultValue xmi:type="LiteralString" value="vi"/>
      </ownedAttribute>
      
      <ownedAttribute name="frame_size" xmi:id="attr_6" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
      </ownedAttribute>
      
      <ownedAttribute name="vad_threshold" xmi:id="attr_7" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Real"/>
        <defaultValue xmi:type="LiteralReal" value="0.5"/>
      </ownedAttribute>
      
      <ownedAttribute name="samples_200ms" xmi:id="attr_8" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
      </ownedAttribute>
      
      <ownedAttribute name="groq_client" xmi:id="attr_9" visibility="private">
        <type xmi:idref="Groq"/>
      </ownedAttribute>
      
      <ownedAttribute name="vad_model" xmi:id="attr_10" visibility="private">
        <type xmi:idref="Model"/>
      </ownedAttribute>
      
      <ownedAttribute name="vad_iterator" xmi:id="attr_11" visibility="private">
        <type xmi:idref="VADIterator"/>
      </ownedAttribute>
      
      <ownedAttribute name="chunk_queue" xmi:id="attr_12" visibility="private">
        <type xmi:idref="deque"/>
      </ownedAttribute>
      
      <ownedAttribute name="overhead_queue" xmi:id="attr_13" visibility="private">
        <type xmi:idref="deque"/>
      </ownedAttribute>
      
      <ownedAttribute name="chunk_queue_duration" xmi:id="attr_14" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Real"/>
        <defaultValue xmi:type="LiteralReal" value="0.0"/>
      </ownedAttribute>
      
      <ownedAttribute name="text_queue" xmi:id="attr_15" visibility="private">
        <type xmi:idref="PriorityQueue"/>
      </ownedAttribute>
      
      <ownedAttribute name="text_sequence" xmi:id="attr_16" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        <defaultValue xmi:type="LiteralInteger" value="0"/>
      </ownedAttribute>
      
      <ownedAttribute name="lock" xmi:id="attr_17" visibility="private">
        <type xmi:idref="Lock"/>
      </ownedAttribute>
      
      <ownedAttribute name="executor" xmi:id="attr_18" visibility="private">
        <type xmi:idref="ThreadPoolExecutor"/>
      </ownedAttribute>
      
      <ownedAttribute name="processing_thread" xmi:id="attr_19" visibility="private">
        <type xmi:idref="Thread"/>
      </ownedAttribute>
      
      <ownedAttribute name="is_running" xmi:id="attr_20" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Boolean"/>
        <defaultValue xmi:type="LiteralBoolean" value="false"/>
      </ownedAttribute>
      
      <ownedAttribute name="is_speaking" xmi:id="attr_21" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Boolean"/>
        <defaultValue xmi:type="LiteralBoolean" value="false"/>
      </ownedAttribute>
      
      <ownedAttribute name="filter_b" xmi:id="attr_22" visibility="private">
        <type xmi:idref="ndarray"/>
      </ownedAttribute>
      
      <ownedAttribute name="filter_a" xmi:id="attr_23" visibility="private">
        <type xmi:idref="ndarray"/>
      </ownedAttribute>
      
      <!-- Public Methods -->
      <ownedOperation name="__init__" xmi:id="op_1" visibility="public">
        <ownedParameter name="chunk_duration_seconds_max" xmi:id="param_1" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Real"/>
        </ownedParameter>
        <ownedParameter name="chunk_duration_seconds_min" xmi:id="param_2" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Real"/>
        </ownedParameter>
        <ownedParameter name="sample_rate" xmi:id="param_3" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
        <ownedParameter name="frame_duration_ms" xmi:id="param_4" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
        <ownedParameter name="groq_api_key" xmi:id="param_5" direction="in">
          <type xmi:idref="Optional_String"/>
        </ownedParameter>
        <ownedParameter name="language" xmi:id="param_6" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
        <ownedParameter name="max_workers" xmi:id="param_7" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
        <ownedParameter name="token_master" xmi:id="param_8" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="process_chunk" xmi:id="op_2" visibility="public">
        <ownedParameter name="chunk_data" xmi:id="param_9" direction="in">
          <type xmi:idref="Union_Bytes_ndarray"/>
        </ownedParameter>
        <ownedParameter name="chunk_sample_rate" xmi:id="param_10" direction="in">
          <type xmi:idref="Optional_Integer"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_11" direction="return">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Boolean"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="transcribe_audio" xmi:id="op_3" visibility="public">
        <ownedParameter name="wav_buffer" xmi:id="param_12" direction="in">
          <type xmi:idref="BytesIO"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_13" direction="return">
          <type xmi:idref="Optional_String"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="get_result_text" xmi:id="op_4" visibility="public">
        <ownedParameter name="return" xmi:id="param_14" direction="return">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="reset_vad_state" xmi:id="op_5" visibility="public"/>
      
      <ownedOperation name="get_new_text" xmi:id="op_6" visibility="public">
        <ownedParameter name="return" xmi:id="param_15" direction="return">
          <type xmi:idref="Optional_String"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="clear_text_queue" xmi:id="op_7" visibility="public"/>
      
      <ownedOperation name="get_queue_status" xmi:id="op_8" visibility="public">
        <ownedParameter name="return" xmi:id="param_16" direction="return">
          <type xmi:idref="dict"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="shutdown" xmi:id="op_9" visibility="public"/>
      
      <ownedOperation name="__del__" xmi:id="op_10" visibility="public"/>
      
      <!-- Private Methods -->
      <ownedOperation name="_normalize_audio" xmi:id="op_11" visibility="private">
        <ownedParameter name="audio_data" xmi:id="param_17" direction="in">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_18" direction="return">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="_filter_noise" xmi:id="op_12" visibility="private">
        <ownedParameter name="audio_data" xmi:id="param_19" direction="in">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_20" direction="return">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="_process_audio_chunk" xmi:id="op_13" visibility="private">
        <ownedParameter name="audio_data" xmi:id="param_21" direction="in">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_22" direction="return">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="_merge_audio_chunks" xmi:id="op_14" visibility="private">
        <ownedParameter name="chunks" xmi:id="param_23" direction="in">
          <type xmi:idref="List_ndarray"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_24" direction="return">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="_get_last_200ms" xmi:id="op_15" visibility="private">
        <ownedParameter name="audio_data" xmi:id="param_25" direction="in">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_26" direction="return">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="_detect_voice" xmi:id="op_16" visibility="private">
        <ownedParameter name="audio_data" xmi:id="param_27" direction="in">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_28" direction="return">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Boolean"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="_create_wav_in_memory" xmi:id="op_17" visibility="private">
        <ownedParameter name="audio_data" xmi:id="param_29" direction="in">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_30" direction="return">
          <type xmi:idref="Optional_BytesIO"/>
        </ownedParameter>
      </ownedOperation>
      
      <ownedOperation name="_clean_text" xmi:id="op_18" visibility="private">
        <ownedParameter name="text" xmi:id="param_31" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="param_32" direction="return">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
      </ownedOperation>
    </Class>
    
    <!-- ============================================ -->
    <!-- DEPENDENCY CLASSES -->
    <!-- ============================================ -->
    
    <Class name="Groq" xmi:id="Groq" visibility="public">
      <ownedOperation name="__init__" xmi:id="groq_op_1" visibility="public">
        <ownedParameter name="api_key" xmi:id="groq_param_1" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="audio.transcriptions.create" xmi:id="groq_op_2" visibility="public">
        <ownedParameter name="file" xmi:id="groq_param_2" direction="in">
          <type xmi:idref="File"/>
        </ownedParameter>
        <ownedParameter name="model" xmi:id="groq_param_3" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="groq_param_4" direction="return">
          <type xmi:idref="Transcription"/>
        </ownedParameter>
      </ownedOperation>
    </Class>
    
    <Class name="VADIterator" xmi:id="VADIterator" visibility="public">
      <ownedOperation name="__init__" xmi:id="vad_op_1" visibility="public">
        <ownedParameter name="model" xmi:id="vad_param_1" direction="in">
          <type xmi:idref="Model"/>
        </ownedParameter>
        <ownedParameter name="threshold" xmi:id="vad_param_2" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Real"/>
        </ownedParameter>
        <ownedParameter name="sampling_rate" xmi:id="vad_param_3" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
        <ownedParameter name="min_silence_duration_ms" xmi:id="vad_param_4" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
        <ownedParameter name="speech_pad_ms" xmi:id="vad_param_5" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="__call__" xmi:id="vad_op_2" visibility="public">
        <ownedParameter name="audio_tensor" xmi:id="vad_param_6" direction="in">
          <type xmi:idref="Tensor"/>
        </ownedParameter>
        <ownedParameter name="return_seconds" xmi:id="vad_param_7" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Boolean"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="vad_param_8" direction="return">
          <type xmi:idref="Optional_dict"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="reset_states" xmi:id="vad_op_3" visibility="public"/>
    </Class>
    
    <Class name="ThreadPoolExecutor" xmi:id="ThreadPoolExecutor" visibility="public">
      <ownedOperation name="__init__" xmi:id="exec_op_1" visibility="public">
        <ownedParameter name="max_workers" xmi:id="exec_param_1" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
        <ownedParameter name="thread_name_prefix" xmi:id="exec_param_2" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="submit" xmi:id="exec_op_2" visibility="public">
        <ownedParameter name="fn" xmi:id="exec_param_3" direction="in">
          <type xmi:idref="Callable"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="exec_param_4" direction="return">
          <type xmi:idref="Future"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="shutdown" xmi:id="exec_op_3" visibility="public">
        <ownedParameter name="wait" xmi:id="exec_param_5" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Boolean"/>
        </ownedParameter>
        <ownedParameter name="cancel_futures" xmi:id="exec_param_6" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Boolean"/>
        </ownedParameter>
      </ownedOperation>
    </Class>
    
    <Class name="Lock" xmi:id="Lock" visibility="public">
      <ownedOperation name="__enter__" xmi:id="lock_op_1" visibility="public">
        <ownedParameter name="return" xmi:id="lock_param_1" direction="return">
          <type xmi:idref="Lock"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="__exit__" xmi:id="lock_op_2" visibility="public"/>
    </Class>
    
    <Class name="deque" xmi:id="deque" visibility="public">
      <ownedOperation name="append" xmi:id="deque_op_1" visibility="public">
        <ownedParameter name="item" xmi:id="deque_param_1" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Any"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="clear" xmi:id="deque_op_2" visibility="public"/>
      <ownedOperation name="__len__" xmi:id="deque_op_3" visibility="public">
        <ownedParameter name="return" xmi:id="deque_param_2" direction="return">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
      </ownedOperation>
    </Class>
    
    <Class name="PriorityQueue" xmi:id="PriorityQueue" visibility="public">
      <ownedOperation name="put" xmi:id="pq_op_1" visibility="public">
        <ownedParameter name="item" xmi:id="pq_param_1" direction="in">
          <type xmi:idref="Tuple_Integer_String"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="get_nowait" xmi:id="pq_op_2" visibility="public">
        <ownedParameter name="return" xmi:id="pq_param_2" direction="return">
          <type xmi:idref="Tuple_Integer_String"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="qsize" xmi:id="pq_op_3" visibility="public">
        <ownedParameter name="return" xmi:id="pq_param_3" direction="return">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="empty" xmi:id="pq_op_4" visibility="public">
        <ownedParameter name="return" xmi:id="pq_param_4" direction="return">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Boolean"/>
        </ownedParameter>
      </ownedOperation>
    </Class>
    
    <!-- ============================================ -->
    <!-- RELATED CLASSES IN SYSTEM -->
    <!-- ============================================ -->
    
    <Class name="AudioStreamRequest" xmi:id="AudioStreamRequest" visibility="public">
      <ownedAttribute name="id" xmi:id="asr_attr_1" visibility="public">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
      </ownedAttribute>
      <ownedAttribute name="token_verify" xmi:id="asr_attr_2" visibility="public">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
      </ownedAttribute>
      <ownedAttribute name="pin_label" xmi:id="asr_attr_3" visibility="public">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
      </ownedAttribute>
      <ownedAttribute name="device_name" xmi:id="asr_attr_4" visibility="public">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
      </ownedAttribute>
      <ownedAttribute name="virtual_pin" xmi:id="asr_attr_5" visibility="public">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
      </ownedAttribute>
    </Class>
    
    <Class name="MicrophoneSTTTester" xmi:id="MicrophoneSTTTester" visibility="public">
      <ownedAttribute name="sample_rate" xmi:id="mst_attr_1" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
      </ownedAttribute>
      <ownedAttribute name="chunk_duration_ms" xmi:id="mst_attr_2" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
      </ownedAttribute>
      <ownedAttribute name="chunk_samples" xmi:id="mst_attr_3" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
      </ownedAttribute>
      <ownedAttribute name="stt_system" xmi:id="mst_attr_4" visibility="private">
        <type xmi:idref="STTSystem"/>
      </ownedAttribute>
      <ownedAttribute name="is_running" xmi:id="mst_attr_5" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Boolean"/>
      </ownedAttribute>
      <ownedAttribute name="audio_queue" xmi:id="mst_attr_6" visibility="private">
        <type xmi:idref="queue"/>
      </ownedAttribute>
      <ownedAttribute name="text_thread" xmi:id="mst_attr_7" visibility="private">
        <type xmi:idref="Thread"/>
      </ownedAttribute>
      <ownedOperation name="__init__" xmi:id="mst_op_1" visibility="public">
        <ownedParameter name="sample_rate" xmi:id="mst_param_1" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
        <ownedParameter name="chunk_duration_ms" xmi:id="mst_param_2" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="audio_callback" xmi:id="mst_op_2" visibility="public">
        <ownedParameter name="indata" xmi:id="mst_param_3" direction="in">
          <type xmi:idref="ndarray"/>
        </ownedParameter>
        <ownedParameter name="frames" xmi:id="mst_param_4" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
        <ownedParameter name="time_info" xmi:id="mst_param_5" direction="in">
          <type xmi:idref="dict"/>
        </ownedParameter>
        <ownedParameter name="status" xmi:id="mst_param_6" direction="in">
          <type xmi:idref="dict"/>
        </ownedParameter>
      </ownedOperation>
    </Class>
    
    <Class name="ConversationService" xmi:id="ConversationService" visibility="public">
      <ownedAttribute name="client" xmi:id="cs_attr_1" visibility="private">
        <type xmi:idref="Groq"/>
      </ownedAttribute>
      <ownedAttribute name="model" xmi:id="cs_attr_2" visibility="private">
        <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
      </ownedAttribute>
      <ownedAttribute name="conversations" xmi:id="cs_attr_3" visibility="private">
        <type xmi:idref="Dict_String_dict"/>
      </ownedAttribute>
      <ownedAttribute name="lock" xmi:id="cs_attr_4" visibility="private">
        <type xmi:idref="Lock"/>
      </ownedAttribute>
      <ownedOperation name="chat" xmi:id="cs_op_1" visibility="public">
        <ownedParameter name="client_id" xmi:id="cs_param_1" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
        <ownedParameter name="user_message" xmi:id="cs_param_2" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
        <ownedParameter name="return" xmi:id="cs_param_3" direction="return">
          <type xmi:idref="dict"/>
        </ownedParameter>
      </ownedOperation>
    </Class>
    
    <Class name="MQTTService" xmi:id="MQTTService" visibility="public">
      <ownedAttribute name="broker" xmi:id="mqtt_attr_1" visibility="private">
        <type xmi:idref="SimpleMQTTBroker"/>
      </ownedAttribute>
      <ownedAttribute name="mqtt_client" xmi:id="mqtt_attr_2" visibility="private">
        <type xmi:idref="SimpleMQTTClient"/>
      </ownedAttribute>
      <ownedAttribute name="client_is_voice" xmi:id="mqtt_attr_3" visibility="public">
        <type xmi:idref="Dict_String_Boolean"/>
      </ownedAttribute>
      <ownedOperation name="start_broker" xmi:id="mqtt_op_1" visibility="public">
        <ownedParameter name="host" xmi:id="mqtt_param_1" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
        <ownedParameter name="port" xmi:id="mqtt_param_2" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Integer"/>
        </ownedParameter>
      </ownedOperation>
    </Class>
    
    <Class name="WebSocket" xmi:id="WebSocket" visibility="public">
      <ownedOperation name="accept" xmi:id="ws_op_1" visibility="public"/>
      <ownedOperation name="receive_bytes" xmi:id="ws_op_2" visibility="public">
        <ownedParameter name="return" xmi:id="ws_param_1" direction="return">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#Any"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="send_text" xmi:id="ws_op_3" visibility="public">
        <ownedParameter name="text" xmi:id="ws_param_2" direction="in">
          <type xmi:type="PrimitiveType" href="http://www.omg.org/spec/UML/20131001/PrimitiveTypes.xmi#String"/>
        </ownedParameter>
      </ownedOperation>
      <ownedOperation name="close" xmi:id="ws_op_4" visibility="public"/>
    </Class>
    
    <!-- ============================================ -->
    <!-- TYPE DEFINITIONS -->
    <!-- ============================================ -->
    
    <DataType name="ndarray" xmi:id="ndarray"/>
    <DataType name="BytesIO" xmi:id="BytesIO"/>
    <DataType name="Optional_BytesIO" xmi:id="Optional_BytesIO"/>
    <DataType name="Optional_String" xmi:id="Optional_String"/>
    <DataType name="Optional_Integer" xmi:id="Optional_Integer"/>
    <DataType name="Optional_dict" xmi:id="Optional_dict"/>
    <DataType name="Union_Bytes_ndarray" xmi:id="Union_Bytes_ndarray"/>
    <DataType name="List_ndarray" xmi:id="List_ndarray"/>
    <DataType name="Tuple_Integer_String" xmi:id="Tuple_Integer_String"/>
    <DataType name="Dict_String_dict" xmi:id="Dict_String_dict"/>
    <DataType name="Dict_String_Boolean" xmi:id="Dict_String_Boolean"/>
    <DataType name="dict" xmi:id="dict"/>
    <DataType name="Model" xmi:id="Model"/>
    <DataType name="Thread" xmi:id="Thread"/>
    <DataType name="queue" xmi:id="queue"/>
    <DataType name="File" xmi:id="File"/>
    <DataType name="Transcription" xmi:id="Transcription"/>
    <DataType name="Tensor" xmi:id="Tensor"/>
    <DataType name="Callable" xmi:id="Callable"/>
    <DataType name="Future" xmi:id="Future"/>
    <DataType name="SimpleMQTTBroker" xmi:id="SimpleMQTTBroker"/>
    <DataType name="SimpleMQTTClient" xmi:id="SimpleMQTTClient"/>
    
    <!-- ============================================ -->
    <!-- RELATIONSHIPS -->
    <!-- ============================================ -->
    
    <Association name="STTSystem_Groq" xmi:id="assoc_1">
      <memberEnd xmi:idref="STTSystem"/>
      <memberEnd xmi:idref="Groq"/>
      <ownedEnd xmi:id="end_1" type="STTSystem" aggregation="composite" lower="1" upper="1"/>
      <ownedEnd xmi:id="end_2" type="Groq" aggregation="none" lower="1" upper="1"/>
    </Association>
    
    <Association name="STTSystem_VADIterator" xmi:id="assoc_2">
      <memberEnd xmi:idref="STTSystem"/>
      <memberEnd xmi:idref="VADIterator"/>
      <ownedEnd xmi:id="end_3" type="STTSystem" aggregation="composite" lower="1" upper="1"/>
      <ownedEnd xmi:id="end_4" type="VADIterator" aggregation="none" lower="1" upper="1"/>
    </Association>
    
    <Association name="STTSystem_ThreadPoolExecutor" xmi:id="assoc_3">
      <memberEnd xmi:idref="STTSystem"/>
      <memberEnd xmi:idref="ThreadPoolExecutor"/>
      <ownedEnd xmi:id="end_5" type="STTSystem" aggregation="composite" lower="1" upper="1"/>
      <ownedEnd xmi:id="end_6" type="ThreadPoolExecutor" aggregation="none" lower="1" upper="1"/>
    </Association>
    
    <Association name="STTSystem_Lock" xmi:id="assoc_4">
      <memberEnd xmi:idref="STTSystem"/>
      <memberEnd xmi:idref="Lock"/>
      <ownedEnd xmi:id="end_7" type="STTSystem" aggregation="composite" lower="1" upper="1"/>
      <ownedEnd xmi:id="end_8" type="Lock" aggregation="none" lower="1" upper="1"/>
    </Association>
    
    <Association name="STTSystem_deque" xmi:id="assoc_5">
      <memberEnd xmi:idref="STTSystem"/>
      <memberEnd xmi:idref="deque"/>
      <ownedEnd xmi:id="end_9" type="STTSystem" aggregation="composite" lower="1" upper="1"/>
      <ownedEnd xmi:id="end_10" type="deque" aggregation="none" lower="2" upper="2"/>
    </Association>
    
    <Association name="STTSystem_PriorityQueue" xmi:id="assoc_6">
      <memberEnd xmi:idref="STTSystem"/>
      <memberEnd xmi:idref="PriorityQueue"/>
      <ownedEnd xmi:id="end_11" type="STTSystem" aggregation="composite" lower="1" upper="1"/>
      <ownedEnd xmi:id="end_12" type="PriorityQueue" aggregation="none" lower="1" upper="1"/>
    </Association>
    
    <Association name="MicrophoneSTTTester_STTSystem" xmi:id="assoc_7">
      <memberEnd xmi:idref="MicrophoneSTTTester"/>
      <memberEnd xmi:idref="STTSystem"/>
      <ownedEnd xmi:id="end_13" type="MicrophoneSTTTester" aggregation="composite" lower="1" upper="1"/>
      <ownedEnd xmi:id="end_14" type="STTSystem" aggregation="none" lower="1" upper="1"/>
    </Association>
    
    <Association name="ConversationService_Groq" xmi:id="assoc_8">
      <memberEnd xmi:idref="ConversationService"/>
      <memberEnd xmi:idref="Groq"/>
      <ownedEnd xmi:id="end_15" type="ConversationService" aggregation="composite" lower="1" upper="1"/>
      <ownedEnd xmi:id="end_16" type="Groq" aggregation="none" lower="1" upper="1"/>
    </Association>
    
    <Dependency name="AudioStream_Uses_STTSystem" xmi:id="dep_1">
      <client xmi:idref="AudioStreamRequest"/>
      <supplier xmi:idref="STTSystem"/>
    </Dependency>
    
    <Dependency name="WebSocket_Uses_STTSystem" xmi:id="dep_2">
      <client xmi:idref="WebSocket"/>
      <supplier xmi:idref="STTSystem"/>
    </Dependency>
    
    <Dependency name="WebSocket_Uses_ConversationService" xmi:id="dep_3">
      <client xmi:idref="WebSocket"/>
      <supplier xmi:idref="ConversationService"/>
    </Dependency>
    
    <Dependency name="WebSocket_Uses_MQTTService" xmi:id="dep_4">
      <client xmi:idref="WebSocket"/>
      <supplier xmi:idref="MQTTService"/>
    </Dependency>
    
  </Model>
  
</ClassDiagram>

